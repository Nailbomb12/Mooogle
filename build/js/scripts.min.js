"use strict";var result=document.querySelector(".videos"),idInput=document.querySelector("#idInput"),htmlTempl=document.querySelector("#Extendcard").textContent.trim(),compile=_.template(htmlTempl),htmlTpl=document.querySelector("#card").textContent.trim(),compiled=_.template(htmlTpl),htmlTplTV=document.querySelector("#cardTV").textContent.trim(),compil=_.template(htmlTplTV),htmlTemplTvCard=document.querySelector("#ExtendcardTV").textContent.trim(),compileTvCard=_.template(htmlTemplTvCard),apiKey="532f680f186ee3009db06b2e2efe9aab",updateView=function(e){var t="";e.forEach(function(e){t+=compiled(e)}),result.innerHTML=t},updateViewTV=function(e){var t="";e.forEach(function(e){t+=compil(e)}),serials.innerHTML=t},getPopular=function(){axios.get("https://api.themoviedb.org/3/movie/popular?api_key="+apiKey+"&language=ru-RU&page=1").then(function(e){updateView(e.data.results)}).catch(function(e){console.log(e)})},getPopularTV=function(){axios.get("https://api.themoviedb.org/3/tv/popular?api_key="+apiKey+"&language=ru-RU&page=1").then(function(e){updateViewTV(e.data.results)}).catch(function(e){console.log(e)})},searchByName=function(e){axios.get("https://api.themoviedb.org/3/search/movie?include_adult=false&page=1&query="+e+"&language=ru-RU&api_key="+apiKey).then(function(e){updateView(e.data.results)}).catch(function(e){console.log(e)})},showMovie=function(e){return renderFullCard(e,"movie")},showTV=function(e){renderFullCardTV(e,"tv")},updateViewMoview=function(e){var t=compile(e);result.innerHTML=t},updateViewTvCard=function(e){var t=compileTvCard(e);serials.innerHTML=t},renderFullCard=function(e,t){axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"?language=ru-RU&api_key="+apiKey).then(function(a){var o=a.data,i=o.genres,n=o.overview,r=o.poster_path,c=o.production_countries,u=o.release_date,p=o.runtime,l=o.tagline,s=o.title;axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/images?api_key="+apiKey).then(function(a){var o=a.data.backdrops;axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/credits?language=ru-RU&api_key="+apiKey).then(function(a){var d=a.data,g=d.cast,h=d.crew;axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/videos?api_key="+apiKey).then(function(e){var t=e.data.results[0].key;updateViewMoview({title:s,genres:i,overview:n,poster:r,countries:c,date:u,runtime:p,tagline:l,backdrops:o,cast:g,crew:h,key:t})})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(error)})}).catch(function(e){console.log(e)})},renderFullCardTV=function(e,t){axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"?language=ru-RU&api_key="+apiKey).then(function(a){var o=a.data,i=o.name,n=o.genres,r=o.overview,c=o.poster_path,u=o.origin_country,p=o.first_air_date,l=o.episode_run_time,s=o.created_by;console.log(a.data),axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/images?api_key="+apiKey).then(function(a){var o=a.data.backdrops;axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/credits?language=ru-RU&api_key="+apiKey).then(function(a){var d=a.data.cast;console.log(a.data),axios.get("https://api.themoviedb.org/3/"+t+"/"+e+"/videos?api_key="+apiKey).then(function(e){var t=e.data.results[0].key;console.log(i,p,t,l,d[0].name),updateViewTvCard({title:i,date:p,poster:c,backdrops:o,countries:u,cast:d,created_by:s,genres:n,runtime:l,overview:r,key:t})})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(error)})}).catch(function(e){console.log(e)})};getPopular();