"use strict";var result=document.querySelector(".videos"),idInput=document.querySelector("#idInput"),htmlTempl=document.querySelector("#Extendcard").textContent.trim(),compile=_.template(htmlTempl),htmlTpl=document.querySelector("#card").textContent.trim(),compiled=_.template(htmlTpl),apiKey="532f680f186ee3009db06b2e2efe9aab",updateView=function(e){var t="";e.forEach(function(e){t+=compiled(e)}),result.innerHTML=t},getPopular=function(){axios.get("https://api.themoviedb.org/3/movie/popular?api_key="+apiKey+"&language=ru-RU&page=1").then(function(e){updateView(e.data.results)}).catch(function(e){console.log(e)})},searchByName=function(e){axios.get("https://api.themoviedb.org/3/search/movie?include_adult=false&page=1&query="+e+"&language=ru-RU&api_key="+apiKey).then(function(e){updateView(e.data.results)}).catch(function(e){console.log(e)})},showMovie=function(e){return renderFullCard(e)},updateViewMoview=function(e){var t=compile(e);result.innerHTML=t},renderFullCard=function(e){axios.get("https://api.themoviedb.org/3/movie/"+e+"?language=ru-RU&api_key="+apiKey).then(function(t){var o=t.data,i=o.genres,a=o.overview,c=o.poster_path,s=o.production_countries,n=o.release_date,r=o.runtime,l=o.tagline,d=o.title;axios.get("https://api.themoviedb.org/3/movie/"+e+"/images?api_key="+apiKey).then(function(t){var o=t.data.backdrops;axios.get("https://api.themoviedb.org/3/movie/"+e+"/credits?language=ru-RU&api_key="+apiKey).then(function(t){var u=t.data,g=u.cast,m=u.crew;axios.get("https://api.themoviedb.org/3/movie/"+e+"/videos?api_key="+apiKey).then(function(e){var t=e.data.results[0].key;updateViewMoview({title:d,genres:i,overview:a,poster:c,countries:s,date:n,runtime:r,tagline:l,backdrops:o,cast:g,crew:m,key:t})})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(error)})}).catch(function(e){console.log(e)})};getPopular();var menu=document.querySelector(".header__menu"),stub=document.querySelector(".stub"),aside=document.querySelector(".aside"),asideList=document.querySelector(".aside__list"),asideItem=document.querySelectorAll(".aside__item"),category=document.querySelectorAll(".category__list"),searchBtn=document.querySelector(".hidden-search"),hiddenBlock=document.querySelector(".hidden"),toggleAside=function(){aside.classList.toggle("js-show-aside"),stub.classList.add("js-show-stub")};menu.addEventListener("click",toggleAside);var toggleCategorys=function(e){e.target.classList.contains("aside__item")&&e.target.classList.toggle("aside__item-active")};asideList.addEventListener("click",toggleCategorys);var toggleHiddenBlock=function(){hiddenBlock.classList.toggle("js-show-hidden"),stub.classList.add("js-show-stub")};searchBtn.addEventListener("click",toggleHiddenBlock);var hideBlocks=function(e){stub.classList.contains("js-show-stub")&&(hiddenBlock.classList.remove("js-show-hidden"),aside.classList.remove("js-show-aside"),stub.classList.remove("js-show-stub"))};function categorySwitcher(){var e=document.querySelector(".category-list"),t=document.querySelectorAll(".category-item");document.querySelectorAll(".videos-item"),document.querySelector(".—Åategory"),document.querySelector(".top-form");e.addEventListener("click",function(e){t.forEach(function(e){e.classList.remove("category-item--active")}),e.target.classList.add("category-item--active")})}stub.addEventListener("click",hideBlocks);var onClickHandler=function(e){e.preventDefault(0),(e.target.value="")||e.target.classList.contains("idBtn")&&searchByName(idInput.value)};document.addEventListener("click",onClickHandler),categorySwitcher();